apiVersion: extensions/v1beta1
kind: Deployment
metadata: 
    name: turbine-service
spec:
    replicas: 1
    strategy:
      type: RollingUpdate
      rollingUpdate:
        maxSurge: 1
        maxUnavailable: 1
    minReadySeconds: 5
    template:
        metadata:
            labels:
              app: turbine-service
              tier: metrics
        spec:
            containers:
            - name: turbine-service
              image: sleepingtalent/turbine-service:1.0.14-RC
              env:
              - name: CONFIG_URL
                value: http://ae72c3afb915511e795a406fc096cf91-818673775.us-west-2.elb.amazonaws.com:1111/config-api/
              ports:
              - containerPort: 1113

---

kind: Service
metadata:
    name: turbine-server-gateway
    labels:
        app: turbine-server
        tier: metrics
spec:
    type: LoadBalancer
    ports:
    - port: 1113
    selector:
        app: turbine-server
        tier: metrics


